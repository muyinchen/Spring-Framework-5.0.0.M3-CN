### 15.2.7Retrieving auto-generated keys

An`update()`convenience method supports the retrieval of primary keys generated by the database. This support is part of the JDBC 3.0 standard; see Chapter 13.6 of the specification for details. The method takes a`PreparedStatementCreator`as its first argument, and this is the way the required insert statement is specified. The other argument is a`KeyHolder`, which contains the generated key on successful return from the update. There is not a standard single way to create an appropriate`PreparedStatement`\(which explains why the method signature is the way it is\). The following example works on Oracle but may not work on other platforms:

```java
final String INSERT_SQL = "insert into my_test (name) values(?)";
final String name = "Rob";

KeyHolder keyHolder = new GeneratedKeyHolder();
jdbcTemplate.update(
	new PreparedStatementCreator() {
		public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
			PreparedStatement ps = connection.prepareStatement(INSERT_SQL, new String[] {"id"});
			ps.setString(1, name);
			return ps;
		}
	},
	keyHolder);

// keyHolder.getKey() now contains the generated key
```



